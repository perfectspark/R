# Part1 第一部分 入门
---
# 第1章 R语言介绍
## 1.1 为何要使用R
## 1.2 R的获取和安装
CRAN Comprehensive R Archive Network http://cran.r-project.org
## 1.3 R的使用
R是一种区分大小写的解释型语言。

可以在命令提示符（>）后每次输入并执行一条命令，或者一次性执行写在脚本文件中的一组命令。

R中有多种数据类型，包括向量、矩阵、数据框（与数据集类似）以及列表（各种对象的集合）。

注释由符号#开头。在#之后出现的任何文本都会被R解释器忽略。
### 1.3.1 新手上路
### 1.3.2 获取帮助
### 1.3.3 工作空间
工作空间（workspace）就是当前R的工作环境，它存储着所有用户定义的对象（向量、矩阵、函数、数据框、列表）。
在一个R会话结束时，你可以将当前工作空间保存到一个镜像中，并在下次启动R时自动载入它。

当前的工作目录（ working directory）是R用来读取文件和保存结果的默认目录。我们可以使用函数getwd()来查看当前的工作目录，或使用函数setwd()设定当前的工作目录。如果需要读入一个不在当前工作目录下的文件，则需在调用语句中写明完整的路径。
![Alt text](1.png)
### 1.3.4 输入和输出
![Alt text](2.png)
## 1.4 包
### 1.4.1 什么是包
包是R函数、数据、预编译代码以一种定义完善的格式组成的集合。计算机上存储包的目录称为库（library）。
### 1.4.2 包的安装
### 1.4.3 包的载入
### 1.4.4 包的使用方法
## 1.5 批处理
## 1.6 将输出用为输入：结果的重用
## 1.7 处理大数据集
要考虑到两个问题：数据集的大小和要应用的统计方法。
## 1.8 示例实践
## 1.9 小结
---
# 第2章 创建数据集
按照个人要求的格式来创建含有研究信息的数据集，这是任何数据分析的第一步。
在R中，这个任务包括以下两步：
- 选择一种数据结构来存储数据；
- 将数据输入或导入到这个数据结构中。
## 2.1 数据集的概念
数据集通常是由数据构成的一个矩形数组，行表示观测，列表示变量。
## 2.2 数据结构
R拥有许多用于存储数据的对象类型，包括标量、向量、矩阵、数组、数据框和列表。

**对象**（object）是指可以赋值给变量的任何事物，包括常量、数据结构、函数，甚至图形。
对象都拥有某种**模式**，描述了此对象是如何存储的，以及某个类，像print这样的泛型函数表明如何处理此对象。

数据框（data frame）是R中用于存储数据的一种结构：列表示变量，行表示观测。在同一个数据框中可以存储不同类型的变量。数据框将是你用来存储数据集的主要数据结构。

因子（factor）是名义型变量或有序型变量。它们在R中被特殊地存储和处理。

### 2.2.1 向量
向量是用于存储数值型、字符型或逻辑型数据的一维数组。
执行组合功能的函数c()可用来创建向量。

单个向量中的数据必须拥有相同的类型或模式（数值型、字符型或逻辑型）。
同一向量中无法混杂不同模式的数据。

标量是只含一个元素的向量。它们用于保存常量。
### 2.2.2 矩阵
矩阵是一个二维数组，只是每个元素都拥有相同的模式（数值型、字符型或逻辑型）。
可通过函数matrix()创建矩阵。
``` R
myymatrix <- matrix(vector, nrow=nmber_of_rows, ncol=number_of_columns,
                    byrow=logical_value, dimnames=list(
                    char_vector_rownames, char_vector_colnames))
```
其中vector包含了矩阵的元素，nrow和ncol用以指定行和列的维数，dimnames包含了可选的、以字符型向量表示的行名和列名。
选项byrow则表明矩阵应当按行填充（byrow=TRUE）还是按列填充（byrow=FALSE），默认情况下按列填充。

矩阵都是二维的，和向量类似，矩阵中也仅能包含一种数据类型。

### 2.2.3 数组
数组（array）与矩阵类似，但是维度可以大于2。
数组可通过array函数创建，形式如下：
```R
myarray <- array(vector, dimensions, dimnames)
```
其中，vector包含了数组中的数据，dimensions是一个数值型向量，给出了各个维度下标的最大值，而dimnames是可选的、各维度名称标签的列表。

数组是矩阵的一个自然推广。
它们在编写新的统计方法时可能很有用。
像矩阵一样，数组中的数据也只能拥有一种模式。

### 2.2.4 数据框
由于不同的列可以包含不同模式（数值型、字符型等）的数据，数据框的概念较矩阵来说更为一般。
数据框将是你在R中最常处理的数据结构。
```R
mydata <- data.frame(col1, col2, col3)
```
其中，列向量col1、col2、col3等可为任何类型（如字符型、数值型或逻辑型）。每一列的名称可由函数names指定。

每一列数据的模式必须唯一，不过你却可以将多个模式的不同列放到一起组成数据框。
1. attach(), detach(), 和 with()

函数attach()可将数据框添加到R的搜索路径中。R在遇到一个变量名以后，将检查搜索路径中的数据框。
函数detach()将数据框从搜索路径中移除。

2. 实例标识符
在R中，实例标识符（case identifier）可通过数据框操作函数中的rowname选项指定。   
将patientID指定为R中标记各类打印输出和图形中实例名称所用的变量。

### 2.2.5 因子
变量可归结为名义型、有序型或连续型变量。

名义型变量是没有顺序之分的类别变量。

有序型变量斯奥是一种顺序关系，而非数量关系。

连续型变量可以呈现为某个范围内的任意值，并同时表示了顺序和数量。

类别（名义型）变量和有序类别（有序型）变量在R中成为因子（factor）。
因子在R中非常重要，因为它决定了数据的分析方式以及如何进行视觉呈现。

函数factor()以一个整数向量的形式存储类别值，整数的取值范围是[1..k]（其中k是名义型变量中唯一值的个数），同时一个由字符串（原始值）组成的内部向量将映射到这些整数上。

### 2.2.6 列表
列表（list）是R的数据类型中最为复杂的一种。
一般来说，列表就是一些对象（或成分，component）的有序集合。
列表允许你整合若干（可能无关的）对象到单个对象名下。
例如某个列表中可能是若干向量、矩阵、数据框，甚至其他列表的组合。
## 2.3 数据的输入